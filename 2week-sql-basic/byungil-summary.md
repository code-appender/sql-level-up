# 2. SQL 기초

# SELECT 구문

## SELECT 구와 FROM 구

- SELECT 뒤에 나열되어 있는 부분으로, SELECT 구라고 부릅니다.
    - 검색할 때 반드시 입력해야 하는 부분
- FROM [테이블 이름]으로 FROM 구라고 부릅니다.
    - 데이터를 선택할 대상 테이블을 지정

## WHERE 구

- SELECT 구문에는 레코드를 선택할 때 추가적인 조건을 지정할 수 있는 방법.

## GROUP BY 구

- 테이블에서 단순하게 데이터를 선택하는 것뿐만 아니라 합계 또는 평균 등의 집계 연산을 SQL 구문으로 할 수 있다.

## HAVING 구

- 선택된 결과 ‘집합’에 또다시 조건을 지정할 수 있다.

## ORDER BY 구

- SELECT 구문의 결과 순서를 보장하기 위해 사용한다.

## 뷰와 서브쿼리

## 뷰

- 자주 사용하는 SELECT 구문을 데이터베이스 안에 저장해두는 것

## 서브쿼리

- FROM구에 직접 지정하는 SELECT 구문

# 조건 분기, 집합 연산, 윈도우 함수, 갱신

## SQL과 조건 분기

- CASE 식을 이용하여 조건 분기

### CASE 식의 구문 (검색 CASE 식)

```sql
CASE WHEN [평가식] THEN [식]
		 WHEN [평가식] THEN [식]
	   WHEN [평가식] THEN [식]
			생략
		 ELSE [식]
END
```

- WHEN 구의 평가식이라는 것은 ‘필드 = 값’처럼 조건을 지정하는 식을 말한다.
- WHERE 구에 조건을 작성하는 방법과 같다.

### CASE 식의 작동

- 처음에 있는 WHEN 구의 평가식부터 평가되고 조건이 맞으면 THEN 구에서 지정한 식이 리턴되며 CASE 식 전체가 종료된다.
- 조건이 맞지 않으면 다음 WHEN 구로 이동해 같은 처리를 반복한다.
- 마지막 WHEN 구까지 반복했는데도 조건이 맞는 경우가 없다면 ‘ELSE’에서 지정한 식이 리턴되며 끝난다.

## SQL의 집합 연산

### UNION으로 합집합 구하기

- Address 테이블과 Address2 테이블의 합집합을 구할 때 UNION(합)이라는 연산자를 사용한다.
- 문자 그대로 두 개의 테이블을 하나의 테이블로 합친 결과가 나온다.
- UNION은 합집합을 구할 때 중복된 레코드를 제거한다.

### INTERSECT로 교집합 구하기

- 교집합을 구할 때 사용하는 연산자는 INTERSECT로 ‘교차’라는 의미다.
- 양쪽 테이블에 공통으로 존재하는 레코드를 출력한다.
- 중복된 것이 있다면 해당 레코드는 제외된다.

### EXCEPT로 차집합 구하기

- 차집합을 수행하는 EXCEPT 연산자로 ‘제외’라는 의미다.
- UNION과 INTERSECT는 어떤 테이블을 먼저 적든 그 순서와 상관없이 결과가 같지만, EXCEPT의 경우는 결과가 다르다.
- 1 - 5와 5 - 1의 결과가 다른 것과 같다고 생각하면 된다.

## 윈도우 함수

- 윈도우 함수는 데이터를 가공하게 해준다는 점에서도 중요하지만, 성능과 큰 관계가 있다.
- 특징을 한마디로 정리하면 `집약 기능이 없는 GROUP BY 구`
- 윈도우 함수는 자르기 기능만 있는 것이다.
- ‘PARTITION BY’라는 구로 수행한다.

## 트랙잭션과 갱신

- 데이터를 갱싱하는 것은 부가적인 기능이다.

### INSERT로 데이터 삽입

### DELETE로 데이터 제거

### UPDATE로 데이터 갱신