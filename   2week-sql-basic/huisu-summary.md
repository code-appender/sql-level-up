# SQL Basic

## SELECT 구문

1. SELECT 구와 FROM 구
    - SELECT: 검색을 위해 사용하는 SQL 구문
    - SELECT 구: 어떤 필드를 검색할 것인지 나열
    - FROM 구: 어느 테이블에서 조회할 것인지 명시
    - SELECT 1처럼 상수를 선택하는 경우 FROM 생략
    - SELECT 구문에는 데이터를 어떤 방법으로 선택할지 명시되어 있지 않음
        - 절차 지향적인 방법 채택
    - 공란 데이터는 NULL 데이터로 취급
2. WHERE 구
    - SELECT 구문에서 레코드를 선택할 때 추가적인 조건 지정
    - ~라는 경우의 관계부사
    - 다음과 같은 조건 지정 가능

        | 연산자 | 의미 |
        | --- | --- |
        | = | ~와 같음 |
        | <> | ~와 같지 않음 |
        | >= | ~이상 |
        | > | ~초과 |
        | <= | ~이하 |
        | < | ~미만 |
    
    - 조건들을 특정 구문을 통해 열거해서 사용할 수 있음

        | 구문 | 의미 |
        | --- | --- |
        | AND | 교집합 |
        | OR | 합집합 |
        | IN (’item1’, ‘item2) | 합집합의 열거 간소화 |
    
    - NULL인지 검사하는 것은 다음과 같은 구문 사용

        | 구문 | 의미 |
        | --- | --- |
        | IS NULL | NULL |
        | IS NOT NULL | NULL X |
    
    > **SELECT 구문은 절차 지향형 함수** 
    함수는 입력을 받고 관련된 처리를 수행한 뒤에 값을 리턴하는 것
    SELECT 구문은 입력이 되는 테이블에 변경이 일어나지 않기에 읽기 전용 함수
    SELECT 구문의 입력과 출력은 모두 2차원 표인 테이블 → 폐쇄성


3. GROUP BY 구
    - GROUP BY 구는 케이크를 자르는 칼과 같은 역할
    - 그룹으로 나누게 되면 다양한 숫자 함수를 사용한 집계가 가능해짐

        | 함수 이름 | 설명 |
        | --- | --- |
        | COUNT | 레코드 수 계산 |
        | SUM | 숫자를 더함 |
        | AVG | 숫자의 평균 계산 |
        | MAX | 최댓값 |
        | MIN | 최솟값 |

    - 그룹을 나누지 않고 집계를 하고 싶다면 GROUP BY 구를 사용할 때 키를 지정하지 않으면 됨
        - 보통 “GROUP BY ()” 생략
        - 일부 DBMS에서는 미지원
4. HAVING 구
    - SELECT로 얻은 결과 집합에 또 조건을 걸어 선택하는 기능
    - WHERE이 레코드에 조건을 지정한다면 HAVING은 집합에 조건을 지정
    - GROUP BY와 항상 함께 사용
5. ORDER BY 구
    - SELECT 구문을 실행하면 레코드들은 엉터리 순서대로 출력
    - DESC(내림차순) ASC(오름차순)을 사용해 정렬하는 구문
    - SQL 기본 설정에 따라 디폴트로 ASC를 지원해 주니 이는 생략 가능
6. 뷰와 서브쿼리
    - 뷰: 자주 사용하는 SELECT 구문을 데이터베이스 안에 저장해 두는 것
        - 뷰는 사용법이 테이블과 같지만 내부에 데이터를 보유하고 있지 않음
        - 내부적으로 추가적인 SELECT 구문을 실행하는 중ㅈ첩 구조
    - 서브쿼리: FROM구에 직접 지정하는 SELECT 구문
        - 매칭 문제에서는 WHERE 조건걸 뒤에 작성되기도 함
        - 서브쿼리의 SELECT 구문을 받은 SQL은 서브쿼리를 상수로 전개해서 실행
        - 상수를 직접 입력하는 하드 코딩 지양

## 조건 분기, 집합 연산, 윈도우 함수, 갱신

1. SQL과 조건 분기
    - SQL의 조건 분기 단위는 식
    - 단순 CASE 식과 검색 CASE 식을 활용하여 조건 분기
    - CASE WHEN 평가식 THEN 식 형태
    - WHEN 구의 평가식부터 평가되고 조건이 맞으면 THEN 구에서 저장한 식이 리턴
    - 식을 적을 수 있는 곳이라면 모두 위치 가능
2. SQL의 집합 연산
    - 집합 연산 과정 제공

        | 연산자 | 설명 |
        | --- | --- |
        | UNION | 합집합 |
        | INTERSECT | 교집합 |
        | EXCEPT | 차집합 |
3. 윈도우 함수
    - 집약 기능이 없는 GROUP BY 구
    - 테이블을 자르는 것은 PARTITION BY 구로 수행
    - 자른 후에 집약하지 않으므로 출력 결과의 레코드 수가 입력되는 테이블의 레코드 수와 동일
    - 집약 함수 뒤에 OVER 구를 작성하고 OVER 구를 작성하고 내부에 자를 키를 지정하는 PARTITION BY나 GROUP BY 사용
4. 트랜잭션과 갱신
    - 데이터를 조회하는 게 SQL의 주된 기능이고 데이터를 갱신하는 것은 부가적인 기능
    - 삽입, 제거, 갱신 존재
    - 삽입
        - INSERT INTO 필드 값, VALUES 값을 순서대로 대응하여 입력
        - 여러 개의 레코드를 하나의 INSERT 구문으로 삽입 가능
    - 제거
        - DELETE 구문의 삭제 대상은 필드가 아니라 레코드이기에 테이블이라는 빈 상자 존재
    - 갱신
        - UPDATE 구문도 일부 레코드만 갱신하고 싶을 때는 WHERE 구로 필터링